/* ATENÇÃO: Este arquivo é apenas um exemplo de JS minificado. Não substitua o JS real que está linkado no HTML principal. */



const SPA=(()=>{let e="main";function t(e){let t=e.getAttribute("href");return!!t&&!t.startsWith("http")&&!t.startsWith("mailto:")&&!t.startsWith("#")}async function r(t,r=!1){try{let a=await fetch(t);if(!a.ok)throw Error("Falha ao carregar: "+a.status);let l=await a.text(),o=new DOMParser,i=o.parseFromString(l,"text/html"),n=i.querySelector(e);if(!n)throw Error("P\xe1gina sem <main> para inserir.");let s=document.querySelector(e);s.replaceWith(n),initPage(),r?history.replaceState({url:t},"",t):history.pushState({url:t},"",t)}catch(d){console.error(d),showGlobalAlert("Erro ao carregar a p\xe1gina.","error")}}function a(){document.body.addEventListener("click",e=>{let a=e.target.closest("a");if(a&&t(a)){e.preventDefault();let l=a.getAttribute("href");r(l)}}),window.addEventListener("popstate",e=>{let t=e.state;t&&t.url&&r(t.url,!0)})}function l(){a(),initPage()}return{init:l,loadPage:r}})();function renderTemplate(e,t={}){return e.replace(/{{\s*([a-zA-Z0-9_\.]+)\s*}}/g,(e,r)=>{let a=r.split("."),l=t;for(let o of a){if(!l||!(o in l))return"";l=l[o]}return String(l)})}function showFieldError(e,t){clearFieldError(e),e.classList.add("input-error");let r=document.createElement("small");r.className="field-error-message",r.textContent=t,e.insertAdjacentElement("afterend",r)}function clearFieldError(e){e.classList.remove("input-error");let t=e.nextElementSibling;t&&t.classList.contains("field-error-message")&&t.remove()}function showGlobalAlert(e,t="info"){let r=document.querySelector(".spa-global-alert");r&&r.remove();let a=document.createElement("div");a.className=`spa-global-alert spa-alert-${t}`,a.textContent=e,document.body.prepend(a),setTimeout(()=>a.classList.add("visible"),50),setTimeout(()=>a.classList.remove("visible"),5e3),setTimeout(()=>a.remove(),5500)}function validateRequired(e){return!e||("checkbox"===e.type||"radio"===e.type?e.checked:""!==e.value.trim())}function validateEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function validatePhone(e){return/^\(\d{2}\) \d{4,5}-\d{4}$/.test(e)}function validateCEP(e){return/^\d{5}-\d{3}$/.test(e)}function validateCPF(e){if(11!==(e=(e||"").replace(/[\D]/g,"")).length||/^(\d)\1{10}$/.test(e))return!1;let t=t=>{let r=0;for(let a=0;a<t-1;a++)r+=parseInt(e.charAt(a))*(t-a);let l=r%11;return l<2?0:11-l},r=t(10),a=t(11);return r===parseInt(e.charAt(9))&&a===parseInt(e.charAt(10))}function initPage(){document.querySelectorAll("form").forEach(e=>{e.id||(e.id="form-"+Math.random().toString(36).substring(2,9)),setupFormValidation(e)}),document.querySelectorAll(".button-enviar").forEach(e=>{let t=e.closest("form");t&&e.addEventListener("click",()=>t.requestSubmit())})}function setupFormValidation(e){e.addEventListener("submit",function(t){t.preventDefault(),clearFormErrors(e);let r=validateForm(e);r?(showGlobalAlert("Formul\xe1rio enviado com sucesso!","success"),e.reset()):showGlobalAlert("Existem erros no formul\xe1rio. Verifique os campos em destaque.","error")}),["input[required]",'input[type="email"]','input[name="telefone"]','input[name="cpf"]','input[name="cep"]'].forEach(t=>{e.querySelectorAll(t).forEach(e=>{e.addEventListener("blur",()=>{validateField(e)}),e.addEventListener("input",()=>clearFieldError(e))})})}function clearFormErrors(e){e.querySelectorAll(".input-error").forEach(e=>e.classList.remove("input-error")),e.querySelectorAll(".field-error-message").forEach(e=>e.remove())}function validateForm(e){let t=!0,r=e.querySelectorAll("[required]");r.forEach(e=>{validateRequired(e)||(showFieldError(e,"Campo obrigat\xf3rio"),t=!1)});let a=e.querySelector('input[type="email"]');a&&""!==a.value.trim()&&!validateEmail(a.value.trim())&&(showFieldError(a,"Email inv\xe1lido"),t=!1);let l=e.querySelector('input[name="telefone"]');l&&""!==l.value.trim()&&!validatePhone(l.value.trim())&&(showFieldError(l,"Telefone no formato (00) 00000-0000"),t=!1);let o=e.querySelector('input[name="cep"]');o&&""!==o.value.trim()&&!validateCEP(o.value.trim())&&(showFieldError(o,"CEP no formato 00000-000"),t=!1);let i=e.querySelector('input[name="cpf"]');return i&&""!==i.value.trim()&&!validateCPF(i.value.trim())&&(showFieldError(i,"CPF inv\xe1lido"),t=!1),t}function validateField(e){clearFieldError(e);let t=e.getAttribute("name")||e.id||"",r=e.value.trim();return e.hasAttribute("required")&&!validateRequired(e)?(showFieldError(e,"Campo obrigat\xf3rio"),!1):"email"!==e.type||""===r||validateEmail(r)?"telefone"!==t||""===r||validatePhone(r)?"cep"!==t||""===r||validateCEP(r)?!!("cpf"!==t||""===r||validateCPF(r))||(showFieldError(e,"CPF inv\xe1lido"),!1):(showFieldError(e,"CEP no formato 00000-000"),!1):(showFieldError(e,"Telefone no formato (00) 00000-0000"),!1):(showFieldError(e,"Email inv\xe1lido"),!1)}!function e(){let t=`
  .input-error { outline: 2px solid rgba(220,50,50,0.25); }
  .field-error-message { color: #b22222; font-size: 0.9rem; margin-top: 4px; display:block; }
  .spa-global-alert { position: fixed; left: 50%; transform: translateX(-50%) translateY(-20px); top: 10px; padding: 12px 18px; border-radius: 8px; z-index: 9999; opacity: 0; transition: all 300ms ease; box-shadow: 0 6px 18px rgba(0,0,0,0.12); }
  .spa-global-alert.visible { opacity: 1; transform: translateX(-50%) translateY(0); }
  .spa-alert-info { background: #f0f4ff; color: #0b3a8c; }
  .spa-alert-success { background: #ecf9f0; color: #116633; }
  .spa-alert-error { background: #fff2f2; color: #8b0000; }
  `,r=document.createElement("style");r.textContent=t,document.head.appendChild(r)}(),document.addEventListener("DOMContentLoaded",()=>{SPA.init();let e=document.getElementById("toggle-contrast");e&&e.addEventListener("click",()=>{document.body.classList.toggle("high-contrast")})}),window.SPA=SPA,window.renderTemplate=renderTemplate,window.validateCPF=validateCPF;


